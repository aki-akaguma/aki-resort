# Acceptance Criteria (EARS Format)

This document outlines the acceptance criteria for the `aki-resort` utility using the Easy Approach to Requirements Syntax (EARS).

## Core System Behaviors

- **AC1:** When a user provides text via standard input, the system **shall** read that text for processing.
- **AC2:** When text has been read, the system **shall** sort the lines and print the result to standard output.
- **AC3:** When no sorting key is specified via the `-e` option, the system **shall** use the entire line as the sorting key.

## Feature-Specific Behaviors

- **AC4:** Where the user provides a regular expression via the `-e` or `--exp` option, the system **shall** use the first capture group of the regex match as the sort key.
- **AC5:** Where the user provides a regex via the `-e` option that has no capture groups, the system **shall** use the entire regex match as the sort key.
- **AC6:** Where the user specifies `--according-to string`, the system **shall** sort the keys lexicographically.
- **AC7:** Where the user specifies `--according-to numeric`, the system **shall** sort the keys based on their numeric value.
- **AC8:** Where the user specifies `--according-to version`, the system **shall** sort the keys using semantic versioning rules.
- **AC9:** Where the user specifies `--according-to month`, the system **shall** sort the keys chronologically by month name.
- **AC10:** Where the user specifies `--according-to time`, the system **shall** sort the keys based on their time value (HH:MM:SS).
- **AC11:** Where the user includes the `-r` or `--reverse` flag, the system **shall** reverse the final sort order.
- **AC12:** Where the user includes the `-u` or `--unique` flag, the system **shall** output only the first line from any set of lines with identical sort keys.
- **AC13:** Where the user provides `-h` or `--head <num>`, the system **shall** exclude the first `<num>` lines from the sorting operation, treating them as a fixed header.
- **AC14:** Where the user provides `-t` or `--tail <num>`, the system **shall** exclude the last `<num>` lines from the sorting operation, treating them as a fixed footer.
- **AC15:** Where the user provides `--color <when>`, the system **shall** highlight the matched sort key in the output according to the `<when>` parameter (`always`, `never`, `auto`).

## System Responses & Error Handling

- **AC16:** When the user provides the `-H` or `--help` flag, the system **shall** display a help message and exit immediately.
- **AC17:** When the user provides the `-V` or `--version` flag, the system **shall** display version information and exit immediately.
- **AC18:** If the total size of the input data exceeds the value set by `--max-buffer`, then the system **shall** stop processing and display an error message.
