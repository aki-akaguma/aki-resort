# Development Tasks Checklist

This document lists the development tasks that have been completed for the `aki-resort` utility, based on the design document.

### Core Architecture & Project Setup
- [x] Set up the project with a library-first structure (`lib.rs` and `main.rs`).
- [x] Establish a modular architecture separating concerns into `conf`, `run`, `sort`, and `util` modules.
- [x] Abstract I/O operations to handle stdin, stdout, and stderr.

### Configuration & Command-Line Interface
- [x] Implement command-line argument parsing.
- [x] Define a `CmdOptConf` struct to hold all parsed options.
- [x] Implement the `-H, --help` flag to display usage information.
- [x] Implement the `-V, --version` flag to display version and build details.
- [x] Support for environment variables for ANSI color sequences.

### Application Logic & Features
- [x] Implement the main application loop to read, process, and output text.
- [x] Implement sort key extraction using regular expressions (`-e, --exp`).
- [x] Implement the `--head <num>` option to preserve header lines.
- [x] Implement the `--tail <num>` option to preserve footer lines.
- [x] Implement the `-u, --unique` flag to filter output to unique lines.
- [x] Implement the `--color <when>` option to highlight the sort key.
- [x] Implement the `--max-buffer <size>` option to control memory usage.

### Sorting Subsystem
- [x] Create a `SortLinesBuffer` trait to abstract sorting strategies.
- [x] Integrate the `rayon` crate to perform parallel sorting.
- [x] Implement the default lexicographical (`string`) sort.
- [x] Implement numeric sorting (`--according-to numeric`).
- [x] Implement semantic version sorting (`--according-to version`).
- [x] Implement month name sorting (`--according-to month`).
- [x] Implement time string sorting (`--according-to time`).
- [x] Implement reverse sort order (`-r, --reverse`) for all sort modes.

### Utilities & Error Handling
- [x] Implement graceful error handling for broken pipes.
- [x] Provide clear error messages for invalid arguments or regexes.
- [x] Create utility parsers for custom option types like `<size>` and `<when>`.
